# BigQuery Data Sync Tool - Environment Configuration
# This tool syncs data from any SQL databases (MySQL, PostgreSQL) to BigQuery.
# Copy this file to .env and update the values for your environment.

# ============================================================================
# GOOGLE CLOUD / BIGQUERY SETTINGS (Required)
# ============================================================================

# Google Cloud Project ID where BigQuery dataset is located
GCP_PROJECT_ID=my-gcp-project-123
# BigQuery dataset ID where all synced tables will be created/updated
BQ_DATASET_ID=analytics_data

# ============================================================================
# DATABASES TO SYNC (Required)
# ============================================================================

# Comma-separated list of database identifiers to sync
# Each identifier requires corresponding {ID}_DB_* configuration below
# Example: SYNC_DATABASES=finance,crm,inventory
SYNC_DATABASES=finance,salesforce

# ============================================================================
# GLOBAL DATABASE DEFAULTS (Optional)
# ============================================================================

# Default database host (used if {DB}_DB_HOST is not set)
DB_HOST=db.example.com
# Default database port (MySQL: 3306, PostgreSQL: 5432)
DB_PORT=3306
# Default database type: mysql or postgres
DB_TYPE=mysql

# Connection pool settings
DB_MAX_OPEN_CONNECTIONS=15
DB_MAX_IDLE_CONNECTIONS=5
DB_CONN_MAX_LIFETIME=1m

# Timeouts (Go duration strings)
# - MySQL: used directly in DSN (timeout/readTimeout/writeTimeout)
# - PostgreSQL: DB_CONN_TIMEOUT -> connect_timeout (seconds)
#              DB_STATEMENT_TIMEOUT -> statement_timeout (ms) via options
DB_CONN_TIMEOUT=30s
DB_READ_TIMEOUT=60s
DB_WRITE_TIMEOUT=60s

# PostgreSQL SSL mode (used when db type is postgres)
# Common values: disable, require, verify-ca, verify-full
DB_SSLMODE=verify-full

# ============================================================================
# SYNC SETTINGS (Optional)
# ============================================================================

# Maximum duration for the entire sync operation before timeout
SYNC_TIMEOUT=10m
# Date format for timestamp columns (Go time format)
DATE_FORMAT=2006-01-02
# Number of rows to process per batch during sync
DEFAULT_BATCH_SIZE=1000

# ============================================================================
# FEATURE FLAGS (Optional)
# ============================================================================

# When true, simulates sync without writing to BigQuery (for testing)
DRY_RUN=false
# When true, automatically creates BigQuery tables if they don't exist
AUTO_CREATE_TABLES=true
# When true, deletes all existing data before syncing (full refresh mode)
TRUNCATE_ON_SYNC=false

# ============================================================================
# LOGGING SETTINGS (Optional)
# ============================================================================

# Logging environment: dev (human-readable) or prod (JSON structured)
LOG_ENV=dev
# Log level: debug, info, warn, error, dpanic, panic, fatal
LOG_LEVEL=info

# ============================================================================
# FINANCE DATABASE CONFIGURATION
# ============================================================================

# Enable/disable syncing for this database
FINANCE_ENABLED=true
# Database type: mysql or postgres
FINANCE_DB_TYPE=mysql
# Database server hostname
FINANCE_DB_HOST=finance-db.example.com
# Database server port
FINANCE_DB_PORT=3306
# Name of the database/schema to connect to
FINANCE_DB_NAME=finance_prod
# Database username for authentication
FINANCE_DB_USER=finance_reader
# Database password for authentication
FINANCE_DB_PASSWORD=your_secure_password_here
# Comma-separated list of tables to sync from this database
FINANCE_TABLES=invoices,payments,accounts,transactions

# Optional per-database timeout overrides
# FINANCE_DB_CONN_TIMEOUT=30s
# FINANCE_DB_READ_TIMEOUT=60s
# FINANCE_DB_WRITE_TIMEOUT=60s
# Optional per-database statement timeout (Postgres only; defaults to FINANCE_DB_READ_TIMEOUT)
# FINANCE_DB_STATEMENT_TIMEOUT=60s

# ============================================================================
# SALESFORCE DATABASE CONFIGURATION
# ============================================================================

# Enable/disable syncing for this database
SALESFORCE_ENABLED=true
# Database type: mysql or postgres
SALESFORCE_DB_TYPE=mysql
# Database server hostname
SALESFORCE_DB_HOST=salesforce-db.example.com
# Database server port
SALESFORCE_DB_PORT=3306
# Name of the database/schema to connect to
SALESFORCE_DB_NAME=salesforce_mirror
# Database username for authentication
SALESFORCE_DB_USER=sf_reader
# Database password for authentication
SALESFORCE_DB_PASSWORD=your_secure_password_here
# Comma-separated list of tables to sync from this database
SALESFORCE_TABLES=opportunities,contacts,accounts,leads

# Optional per-database timeout overrides
# SALESFORCE_DB_CONN_TIMEOUT=30s
# SALESFORCE_DB_READ_TIMEOUT=60s
# SALESFORCE_DB_WRITE_TIMEOUT=60s
# Optional per-database statement timeout (Postgres only; defaults to SALESFORCE_DB_READ_TIMEOUT)
# SALESFORCE_DB_STATEMENT_TIMEOUT=60s

# Maximum allowed row parse failures per table (-1 = unlimited)
MAX_ROW_PARSE_FAILURES=100

# ============================================================================
# TABLE-SPECIFIC CONFIGURATION (Optional)
# ============================================================================
# Pattern: {DATABASE_ID}_{TABLE_NAME}_{SETTING}
# Uncomment and modify as needed for fine-grained control
# ============================================================================

# Example: Finance invoices table with custom settings
# FINANCE_INVOICES_ENABLED=true
# FINANCE_INVOICES_TARGET_TABLE=finance_invoices
# FINANCE_INVOICES_PRIMARY_KEY=invoice_id
# FINANCE_INVOICES_TIMESTAMP_COLUMN=updated_at
# FINANCE_INVOICES_COLUMNS=invoice_id,customer_id,amount,status,created_at,updated_at
# FINANCE_INVOICES_BATCH_SIZE=5000

# Example: Salesforce opportunities table with custom settings
# SALESFORCE_OPPORTUNITIES_ENABLED=true
# SALESFORCE_OPPORTUNITIES_TARGET_TABLE=sf_opportunities
# SALESFORCE_OPPORTUNITIES_PRIMARY_KEY=id
# SALESFORCE_OPPORTUNITIES_TIMESTAMP_COLUMN=last_modified_date

# ============================================================================
# ADDITIONAL DATABASE EXAMPLE (PostgreSQL)
# ============================================================================
# Uncomment and add to SYNC_DATABASES to enable
#
# INVENTORY_ENABLED=true
# INVENTORY_DB_TYPE=postgres
# INVENTORY_DB_HOST=inventory-db.example.com
# INVENTORY_DB_PORT=5432
# INVENTORY_DB_NAME=inventory_prod
# INVENTORY_DB_USER=inventory_reader
# INVENTORY_DB_PASSWORD=your_secure_password_here
# INVENTORY_TABLES=products,stock_levels,warehouses
#
# PostgreSQL SSL mode override (optional)
# INVENTORY_DB_SSLMODE=verify-full
#
# Optional per-database timeout overrides
# INVENTORY_DB_CONN_TIMEOUT=30s
# INVENTORY_DB_READ_TIMEOUT=60s
# INVENTORY_DB_WRITE_TIMEOUT=60s
# Optional per-database statement timeout (Postgres only; defaults to INVENTORY_DB_READ_TIMEOUT)
# INVENTORY_DB_STATEMENT_TIMEOUT=60s